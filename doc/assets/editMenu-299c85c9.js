import{r as e,af as y,aj as M,j as r,ag as C,ai as E}from"./index-62c827a7.js";import{a as w}from"./menu-7fac4763.js";import{T as I}from"./index-7521417b.js";const S=(x,l)=>{console.log("编辑弹窗刷新"),y.useForm();const[u,a]=e.useState(!1),[c,i]=e.useState(),[f,m]=e.useState([]),[d,s]=e.useState([]),[h,O]=e.useState(!1);e.useImperativeHandle(l,()=>({showModal:t=>{i(t),k(),a(!0)}}));const p=async()=>{const{data:t}=await E();m(t)},k=async()=>{const{data:t}=await M(c),n=[];t.forEach(o=>{n.push(o.id),o.children&&n.push(...o.children.map(g=>g.id))}),s(n)};return e.useEffect(()=>{p()},[]),r(C,{forceRender:!0,title:"编辑",open:u,onOk:async()=>{await w({menu:d,id:c}),a(!1)},confirmLoading:h,onCancel:()=>{a(!1),s([])},children:r(I,{checkable:!0,blockNode:!0,fieldNames:{title:"name",key:"id"},onCheck:t=>{s(t)},defaultExpandAll:!0,checkedKeys:d,treeData:f})})},N=e.memo(e.forwardRef(S));export{N as default};
